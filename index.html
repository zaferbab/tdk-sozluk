<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>TDK S√∂zl√ºk (Eksiksiz)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #fafafa; }
    h1 { color: darkred; }
    h2 { margin-top: 20px; color: #333; }
    .anlam, .deyim, .birlesik {
      margin: 8px 0;
      padding: 10px;
      background: #fff;
      border-left: 4px solid darkred;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .deyim { border-left-color: #55f; background: #eef; }
    .birlesik { border-left-color: green; background: #f9f9f9; }
  </style>
</head>
<body>
  <h1>üìñ TDK S√∂zl√ºk</h1>
  <input id="kelime" type="text" placeholder="Bir kelime yaz..." />
  <button onclick="ara()">Ara</button>

  <div id="sonuc"></div>

  <script>
    async function sozlukGetir(kelime) {
      const url = `https://sozluk.gov.tr/gts?ara=${encodeURIComponent(kelime)}`;
      const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;

      const res = await fetch(proxyUrl);
      const wrapper = await res.json();
      return JSON.parse(wrapper.contents);
    }

    async function ara() {
      const kelime = document.getElementById("kelime").value.trim();
      const sonucDiv = document.getElementById("sonuc");
      sonucDiv.innerHTML = "‚è≥ Y√ºkleniyor...";

      try {
        const data = await sozlukGetir(kelime);
        if (!data || data.length === 0) {
          sonucDiv.innerHTML = `‚ùå '${kelime}' i√ßin sonu√ß bulunamadƒ±.`;
          return;
        }

        const kayit = data[0];
        let html = `<h2>üîπ S√∂zc√ºk: ${kelime}</h2>`;

        // Anlamlar
        if (kayit.anlamlarListe) {
          kayit.anlamlarListe.forEach(a => {
            html += `<div class="anlam">${a.anlam}`;
            if (a.orneklerListe) {
              a.orneklerListe.forEach(o => {
                html += `<br><em>√ñrnek:</em> "${o.ornek}"`;
              });
            }
            html += `</div>`;
          });
        }

        // Deyimler & Atas√∂zleri
        if (kayit.deyimlerListe) {
          html += `<h2>üìñ Deyimler & Atas√∂zleri</h2>`;
          kayit.deyimlerListe.forEach(d => {
            html += `<div class="deyim"><b>${d.madde}</b>: ${d.anlam}</div>`;
          });
        }

        // Birle≈üik kelimeler
        if (kayit.birlesikler) {
          const birlesikKelimeler = kayit.birlesikler.split(", ");
          html += `<h2>üìö Birle≈üik Kelimeler</h2>`;
          for (const bk of birlesikKelimeler) {
            const bData = await sozlukGetir(bk);
            if (bData && bData[0] && bData[0].anlamlarListe) {
              html += `<div class="birlesik"><b>${bk}</b><br>`;
              bData[0].anlamlarListe.forEach(a => {
                html += `${a.anlam}<br>`;
              });
              html += `</div>`;
            }
          }
        }

        sonucDiv.innerHTML = html;
      } catch (err) {
        sonucDiv.innerHTML = "‚ö†Ô∏è TDK sunucusuna veya proxy servisine ula≈üƒ±lamadƒ±.";
      }
    }
  </script>
</body>
</html>
